{% extends "base.html" %}

{% block title %}Payment - Student Management{% endblock %}

{% block content %}
<div class="row mb-4 border-bottom border-white">
    <div class="col-md-10 p-2">
        <h1 class="text-white">Payments</h1>
    </div>
    <div class="col-md-2 text-end p-2">
        <a href="{{ url_for('tuitions.list') }}" class="btn btn-lg btn-secondary btn-hover rounded-pill ">Back</a>
        <a type="button" class="btn btn-lg rounded-pill btn-primary" data-bs-toggle="modal" data-bs-target="#AddModal">+
            Add</a>
    </div>
</div>

<div class=" table-container border rounded-4">
    <table class="table table-striped table-hover text-center border rounded-4">
        <thead class="table-primary sticky-header">
            <tr>
                <th>Payment Date</th>
                <th>Amount</th>
                <th>Payment Method</th>
                <th>Transaction Code</th>
                <th>Collected By</th>
                <th>Remarks</th>
            </tr>
        </thead>
        <tbody>
            {% if payments|length == 0 %}
            <tr>
                <td colspan="12" class="text-center text-muted">No Information</td>
            </tr>
            {% endif %}
            {% for pay in payments %}
            <tr>
                <td>{{ pay.payment_date }}</td>
                <td>{{ pay.amount }}</td>
                <td>{{ pay.payment_method }}</td>
                <td>{{ pay.transaction_code }}</td>
                <td>{{ pay.collected_by }}</td>
                <td>{{ pay.remarks }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Modal -->
<form method="POST" action="{{ url_for('tuitions.add_payment', fee_id=fee_id)}}">
    <div class="modal fade" id="AddModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Add Payment</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="form-floating mb-3">
                        <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextareaDisabled"
                            readonly>{{ fee_id }}</textarea>
                        <label for="floatingTextareaDisabled">Fee ID</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="number" class="form-control" id="floatingInput" placeholder="Password"
                            name="amount" required>
                        <label for="floatingInput">Amount *</label>
                    </div>
                    <div class="form-floating mb-3">
                        <select class="form-select" id="floatingSelect" aria-label="Floating label select example"
                            name="method">
                            <option value="Cash">--- Select Payment Method ---</option>
                            <option value="Cash">Cash</option>
                            <option value="Bank Transfer">Bank Transfer</option>
                            <option value="Card">Card</option>
                        </select>
                        <label for="floatingSelect">Payment Method</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingInput" placeholder="Password" name="code">
                        <label for="floatingInput">Transaction Code</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingInput" placeholder="Password"
                            name="collected_by">
                        <label for="floatingInput">Collected By</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingInput" placeholder="Password"
                            name="remarks">
                        <label for="floatingInput">Remarks</label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Add Payment</button>
                </div>
            </div>
        </div>
    </div>
</form>

{% endblock %}