{% extends "base.html" %}

{% block title %}{% if course %}Edit Course{% else %}Add New Course{% endif %} - Student Management{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">{% if course %}Edit Course{% else %}Add New Course{% endif %}</h4>
            </div>
            <div class="card-body">
                <form method="POST"
                    action="{% if course %}{{ url_for('courses.update', course_id=course.course_id) }}{% else %}{{ url_for('courses.create') }}{% endif %}">
                    <!-- Course Name -->
                    <div class="mb-3">
                        <label for="course_name" class="form-label">Course Name *</label>
                        <input type="text" class="form-control" id="course_name" name="course_name"
                            value="{{ course.course_name if course else '' }}" required>
                    </div>

                    <!-- Course Code -->
                    <div class="mb-3">
                        <label for="course_code" class="form-label">Course Code *</label>
                        <input type="text" class="form-control" id="course_code" name="course_code"
                            value="{{ course.course_code if course else '' }}" required>
                    </div>

                    <!-- Program -->
                    <div class="mb-3">
                        <label for="program_id" class="form-label">Program *</label>
                        <select class="form-select" id="program_id" name="program_id" required>
                            <option value="">-- Select Program --</option>
                            {% for prog in programs %}
                            <option value="{{ prog.program_id }}" {% if course and course.program_id==prog.program_id
                                %}selected{% endif %}>
                                {{ prog.program_name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Credits -->
                    <div class="mb-3">
                        <label for="credits" class="form-label">Credits *</label>
                        <input type="number" class="form-control" id="credits" name="credits"
                            value="{{ course.credits if course else '' }}" required min="1" max="10">
                    </div>

                    <!-- Description -->
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" name="description"
                            rows="4">{{ course.description if course else '' }}</textarea>
                    </div>

                    <!-- Buttons -->
                    <div class="text-end">
                        <a href="{{ url_for('courses.list') }}" class="btn btn-secondary">Cancel</a>
                        <button type="submit" class="btn btn-primary">{% if course %}Update{% else %}Add{% endif %}
                            Course</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}